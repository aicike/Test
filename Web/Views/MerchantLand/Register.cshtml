@{

    Layout = "~/Views/Shared/_LayoutDefault.cshtml";
}
@section head{
    <script src="@Url.Content("~/Scripts/Jcrop/jquery.Jcrop.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Scripts/Jcrop/jquery.Jcrop.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Scripts/uploadify/uploadify.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/uploadify/jquery.uploadify.js")" type="text/javascript"></script>
    <script>
         $.ajaxSetup({ 
           async: false 
        }); 
        $(function () {

            $("form").submit(function () {
                if ($(".validation-summary-errors").find("li[style!='display:none']").length == 0) {
                    ShowLayout_Later("请稍后", "请稍后，注册中...");
                } else {
                    $(".validation-summary-errors").find("li").remove();
                }
            });

                //唯一验证 电话
            $("#Phone").blur(function () {
                checkPhone();
            });

             $("#btnSubmit").click(function () {
//                checkEmail();
//                if (EmailRight== false) {
//                    EmailRight = true;
//                    return false;
//                }
                checkPhone();
                if ( PhoneRight== false) {
                    PhoneRight = true;
                    return false;
                }
             })



        });

        function index()
        {
            var url = "@Url.Action("Index", "MerchantLand")";
            window.location.href = url;
        }
        
       var PhoneRight = false;
         function checkPhone() {
            var values = $("#Phone").val();
          
            if (values != "" && values != undefined) {
                var YZUrl = '@Url.Action("ChickUnique", "MerchantLand", new { Area = "", HostName = "" })';
                $.post(YZUrl, { phone:values }, function (result) {
               
                    if (result == "True") {
                        PhoneRight = true;
                    }
                    else {
                        JAlert({
                            Message: "该电话已存在！请换个电话试试！",
                            DialogType: "Ok",
                            BtnOk: "确定"
                        });
                        
                        PhoneRight = false;
                    }
                });
            }
        }

    </script>
    <style type="text/css">
        .middle-out
        {
            width: 320px;
            height: 320px;
            display: table-cell;
            vertical-align: middle;
            text-align: center;
            border: 1px solid #d0d0d0;
        }
        .view p img
        {
            max-width: 100%;
        }
        .ui-front
        {
            z-index: 1000 !important;
        }
    </style>
</script>
}
@model Poco.Merchant
<div class="main">
    <div class="title">
        商户注册
    </div>
    <div class="body">
        @using (Html.BeginForm("Register", "MerchantLand", new { HostName = ViewBag.HostName }, FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
           
            <fieldset>
                <legend>注册信息</legend>
                <table>
                    <tr>
                        <td class="tdTitle" style="width: 120px">
                            <span class="Identification">*</span> 商户名称
                        </td>
                        <td class="tdField">@Html.TextBoxFor(a => a.Name)
                        </td>
                        <td>@Html.ValidationMessageFor(a => a.Name)
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="Identification">*</span> 电话(登录用)
                        </td>
                        <td>@Html.TextBoxFor(a => a.Phone)
                        </td>
                        <td>@Html.ValidationMessageFor(a => a.Phone)
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="Identification">*</span> 密码
                        </td>
                        <td>@Html.PasswordFor(a => a.LoginPwd)
                        </td>
                        <td>@Html.ValidationMessageFor(a => a.LoginPwd)
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="Identification">*</span> 确认密码
                        </td>
                        <td>@Html.PasswordFor(a => a.LoginPwdPage)
                        </td>
                        <td>@Html.ValidationMessageFor(a => a.LoginPwdPage)
                        </td>
                    </tr>
                </table>
            </fieldset>
            <div class="action">
                <input type="submit" id="btnSubmit" value="提交注册" class="button" />
                <input type="button" id="fh" value="返回录陆页" class="button" onclick="index()" />
            </div>
        }
    </div>
</div>
