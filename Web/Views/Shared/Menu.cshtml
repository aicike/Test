@{
    var account = Session[Poco.SystemConst.Session.LoginAccount] as Poco.Account;
    List<Poco.Menu> menuList = new List<Poco.Menu>();
    if (account != null)
    {
        menuList = Injection.Factory.Get<Interface.IMenuModel>(Poco.SystemConst.IOC_Model.MenuModel).GetMenuByRoleID(account.RoleIDs);
    }
}
@{
    if (account != null)
    {
    <ul class="menu">
        @foreach (var item in menuList)
        {
            if (item.IsAppMenu == false)
            {
            <li><a class="menu1">@item.Name</a>
                <ul class="submenu" id="submenu_@item.ID">
                    @{var menu2s = item.Menus.OrderBy(a => a.Order);}
                    @foreach (var menu2 in menu2s)
                    {
                        if (ViewBag.Menu2 == menu2.Controller)
                        { 
                        <li class="select">
                            @Html.ActionLink(menu2.Name, menu2.Action, menu2.Controller, new { Area = menu2.Area }, null)
                            <script>$(function () {$('#submenu_@item.ID').show();});</script>
                        </li>
                        }
                        else
                        { 
                        <li>
                            @Html.ActionLink(menu2.Name, menu2.Action, menu2.Controller, new { Area = menu2.Area }, null)
                        </li>
                        }
                    }
                </ul>
            </li>
            }
        }
    </ul>
    }
}
<script>
    $(function () {
        $(".menu1").click(function () {
            $(this).next(".submenu").slideToggle('fast');
        });
    });
</script>
