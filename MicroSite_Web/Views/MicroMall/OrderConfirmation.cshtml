@{
    ViewBag.Title = "OrderConfirmation";
    Layout = "~/Views/Shared/_LayoutHome.cshtml";
}
@section head{
    <style>
        .Atype > span > span
        {
            font-size: 14px;
            font-weight: normal;
        }
        
        .MainTab
        {
            width: 100%;
            border: 1px solid #dbdbdb;
            box-shadow: 2px 2px 10px #909090;
            background-color: #fff;
            margin-bottom: 15px;
            font-size: 13px;
        }
        
        .MainTab td
        {
            border-top: 1px solid #dbdbdb;
            padding: 8px 8px;
        }
        .MainTab tr:first-child td
        {
            border-top: 0px;
        }
    </style>
    <script>
        function OptintModel() {
            var it = new Object;
            it.PID = "";
            it.PName = "";
            it.PPrive = 0;
            it.PFreight = 0;
            it.PImage = "";
            it.Pcount = 0;
            return it;
        }
        var items = [];
        $(function () {
           
            $("#address").click(function () {
           
                 var Url = "@Url.Action("Index", "MicroUserDeliveryAddress", new { amid = ViewBag.AMID })";

                 var ThisUrl = "@Url.Action("OrderConfirmation", "MicroUserDeliveryAddress", new { AMID = ViewBag.AMID })";
    
                 var href = Url+"&userID=" + "1"+"&backUrl="+ThisUrl;

                 window.location.href = href;


            });

           

        });

        function GetSessionStor() {
            var jsonStrZJ = "";
            jsonStrZJ = sessionStorage.ImtimelyShopZJ;
            if (jsonStrZJ != undefined && jsonStrZJ != "" && jsonStrZJ != "[]") {
                items = eval(jsonStrZJ);
                var prices = 0;
                for (var i in items) {
                    var htmlStr = ' <tr>'
                                + '    <td style="padding: 8px 8px">'
                                + '        <div style="width: 70px; height: 70px; overflow: hidden; float: left">'
                                + '            <img src="' + items[i].PImage + '" style="min-width: 100%; min-height: 70px;'
                                + '                max-height: 70px; border-radius: 5px;" />'
                                + '        </div>'
                                + '        <div style="padding-left: 80px; font-size: 13px">'
                                + items[i].PName
                                + '        </div>'
                                + '        <div style="padding-left: 80px; padding-top: 8px; font-size: 13px;">'
                                + '            <span style="color: #6C6C6C; font-size: 12px;">数量：' + items[i].Pcount + ' 单价：</span><span style="color: Red;'
                                + '                font-weight: bold; font-size: 13px;">￥' + items[i].PPrive + '</span>'
                                + '        </div>'
                                + '    </td>'
                                + '</tr>';
                    $("#SessionInfo").after(htmlStr);
                    prices = prices + parseInt(items[i].Pcount) * parseInt(items[i].PPrive);
                }
                $("#amount").text(prices);

            }
            else {
                $("#isMain").hide();
            }
        }
    </script>
}
@model Poco.UserDeliveryAddress
<div id="isMain" data-role="content" style="display: ">
    <table align="center" class="MainTab" cellpadding="0" cellspacing="0">
        <tr>
            <td>
                @if (Model != null)
                { 
                    <div id="address" style="cursor: pointer; min-height: 50px">
                        <div>
                            收件人：@Model.Receiver<span style="color: #7B7B7B">@Model.RPhone</span>
                        </div>
                        <div style="line-height: 18px; margin-top: 8px">
                            @(Model.Province.Name + Model.City.Name + Model.District.Name + Model.Address)
                        </div>
                    </div>
                }
                else
                {
                    <div id="address" style="cursor: pointer; min-height: 50px">
                        <div style="text-align: center; font-size: 16px; padding-top: 15px; color: #FF7F00">
                            点击添加新地址
                        </div>
                    </div>
                }
            </td>
        </tr>
    </table>
    <table align="center" class="MainTab" cellpadding="0" cellspacing="0">
        <tr>
            <td style="">
                <div style="padding: 8px 8px; border: 1px solid #dbdbdb; border-radius: 5px;">
                    快递：￥00.00元
                </div>
            </td>
        </tr>
    </table>
    <table align="center" class="MainTab" cellpadding="0" cellspacing="0">
        <tr>
            <td style="">
                <div style="padding: 8px 8px; border: 1px solid #dbdbdb; border-radius: 5px;">
                    支付宝
                </div>
            </td>
        </tr>
    </table>
    <table align="center" class="MainTab" cellpadding="0" cellspacing="0">
        <tr id="SessionInfo">
            <td style="">
                商品详情
            </td>
        </tr>
        <tr>
            <td style="font-size: 14px; text-align: right; height: 35px">
                应付金额：￥<span id="amount" style="color: Red; font-weight: bold">0</span>
            </td>
        </tr>
    </table>
    @if (Model != null)
    { 
        <a href="#" id="upOrder" data-role="button" data-corners="false" data-theme="e" data-ajax="false">
            提交订单</a>
    }
    else
    {
        <a href="#" class="ui-disabled" id="upOrder" data-role="button" data-corners="false"
            data-theme="e" data-ajax="false">提交订单</a>
    }
</div>
<script>
    GetSessionStor();
</script>
